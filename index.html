<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>75 Mastery Hub</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Firebase Compat SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
            -webkit-tap-highlight-color: transparent;
            background-color: #020617;
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-spin { animation: spin 1s linear infinite; }
    </style>
</head>
<body class="text-slate-100 font-bold">
    <div id="root">
        <div class="min-h-screen flex flex-col items-center justify-center space-y-4 text-center p-6">
            <div class="w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"></div>
            <p class="text-orange-500 font-black uppercase tracking-widest text-xs tracking-[0.2em]">Syncing Mastery...</p>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- MASTER CONFIGURATION ---
        const MANUAL_CONFIG = {
            apiKey: "AIzaSyD631oq7NL_6eX_d0_MM2TR0ebVNoo-844",
            authDomain: "my75mastery.firebaseapp.com",
            projectId: "my75mastery",
            storageBucket: "my75mastery.firebasestorage.app",
            messagingSenderId: "610595506034",
            appId: "1:610595506034:web:5d5ef97931285065537feb"
        };

        if (!firebase.apps.length) {
            firebase.initializeApp(MANUAL_CONFIG);
        }
        
        const auth = firebase.auth();
        const db = firebase.firestore();
        const appId = '75-day-mastery-v5';

        // --- UI HELPERS ---
        const Icon = ({ name, className = "w-5 h-5" }) => {
            useEffect(() => { if (window.lucide) lucide.createIcons(); }, [name]);
            return <i data-lucide={name} className={className}></i>;
        };

        const WeightChart = ({ data }) => {
            if (!data || data.length < 2) {
                return (
                    <div className="h-32 flex items-center justify-center text-slate-600 text-xs italic border border-slate-800 rounded-2xl bg-slate-900/50">
                        Log weight on multiple days to see trend...
                    </div>
                );
            }
            const weights = data.map(d => d.weight);
            const minW = Math.min(...weights) - 2;
            const maxW = Math.max(...weights) + 2;
            const range = (maxW - minW) || 1;
            const width = 300;
            const height = 100;
            const points = data.map((d, i) => {
                const x = (i / (data.length - 1)) * width;
                const y = height - ((d.weight - minW) / range) * height;
                return `${x},${y}`;
            }).join(' ');
            return (
                <div className="mt-4 p-4 bg-slate-950 rounded-2xl border border-slate-800">
                    <svg viewBox={`0 0 ${width} ${height}`} className="w-full h-32 overflow-visible">
                        <polyline fill="none" stroke="url(#gradient)" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" points={points} style={{ filter: 'drop-shadow(0 0 8px rgba(249,115,22,0.4))' }} />
                        <defs>
                            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" stopColor="#f97316" /><stop offset="100%" stopColor="#ec4899" />
                            </linearGradient>
                        </defs>
                        {data.map((d, i) => (
                            <circle key={i} cx={(i / (data.length - 1)) * width} cy={height - ((d.weight - minW) / range) * height} r="3" className="fill-white" />
                        ))}
                    </svg>
                </div>
            );
        };

        function App() {
            const fileInputRef = useRef(null);

            // --- STATE ---
            const [user, setUser] = useState(null);
            const [loading, setLoading] = useState(true);
            const [activeTab, setActiveTab] = useState('today');
            const [currentDayIndex, setCurrentDayIndex] = useState(0);
            const [daysData, setDaysData] = useState({});
            const [isUploading, setIsUploading] = useState(false);
            const [newWeight, setNewWeight] = useState('');
            const [dbError, setDbError] = useState(null);
            const [showResetConfirm, setShowResetConfirm] = useState(false);

            const [appPhase, setAppPhase] = useState('auth');
            const [activeProfileId, setActiveProfileId] = useState(null);
            const [usernameInput, setUsernameInput] = useState('');
            const [passwordInput, setPasswordInput] = useState('');
            const [authStatus, setAuthStatus] = useState({ message: '', type: '' });

            const [profile, setProfile] = useState({
                programType: 'hard_classic',
                startDate: new Date().toISOString().split('T')[0],
                dietDescription: '',
                intentions: '',
                isConfigured: false,
                targetWaterOz: 128,
                workoutCount: 2,
                workoutMins: 45,
                outdoorRequired: true,
                consumptionType: 'reading',
                consumptionGoal: 10,
                photoRequired: true,
                photoTitle: 'Progress Photo',
                alcoholRequired: true,
                alcoholLimit: 0,
                startWeight: '',
                currentWeight: '',
                measurements: { neck: '', chest: '', waist: '', arms: '', thighs: '', calves: '' }
            });

            const [draftProfile, setDraftProfile] = useState(null);

            // --- DATE & CALC HELPERS ---
            const getDisplayDate = (startStr, dayIdx) => {
                if (!startStr) return "...";
                const d = new Date(startStr);
                if (isNaN(d.getTime())) return "Invalid Start Date";
                const display = new Date(d.getTime());
                display.setDate(display.getDate() + dayIdx);
                return display.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
            };

            const checkDayComplete = (dayInfo, prof) => {
                if (!dayInfo || !prof) return false;
                const t = dayInfo.tasks || {};
                const waterMet = (dayInfo.waterOz || 0) >= (prof.targetWaterOz || 128);
                const w1 = t.workout1 === true;
                const w2 = prof.workoutCount === 2 ? t.workout2 === true : true;
                const diet = t.diet === true;
                const reading = t.consumption === true;
                const photo = prof.photoRequired ? t.photo === true : true;
                const alcohol = prof.alcoholRequired ? t.alcohol === true : true;
                return waterMet && w1 && w2 && diet && reading && photo && alcohol;
            };

            const totalsData = useMemo(() => {
                let totalMins = 0; let completedCount = 0; let totalWater = 0; let totalEduValue = 0;
                const eduList = []; let firstPhoto = null; let latestPhoto = null;

                const sortedDays = Object.entries(daysData)
                    .map(([id, d]) => ({ id, ...d }))
                    .sort((a, b) => (a.day || 0) - (b.day || 0));

                sortedDays.forEach(day => {
                    const mins = (parseInt(day.workout1_mins || 0) + (parseInt(day.workout1_hrs || 0) * 60)) + (parseInt(day.workout2_mins || 0) + (parseInt(day.workout2_hrs || 0) * 60));
                    totalMins += mins; totalWater += (parseInt(day.waterOz) || 0);
                    if (day.tasks?.consumption) totalEduValue += (parseInt(profile.consumptionGoal) || 10);
                    if (day.consumptionTitle?.trim() && !eduList.includes(day.consumptionTitle.trim())) eduList.push(day.consumptionTitle.trim());
                    if (day.photoData) { if (!firstPhoto) firstPhoto = day.photoData; latestPhoto = day.photoData; }
                    if (checkDayComplete(day, profile)) completedCount++;
                });

                return { 
                    hours: Math.floor(totalMins / 60), mins: totalMins % 60, completedDays: completedCount, 
                    weightLost: (profile.startWeight && profile.currentWeight) ? (parseFloat(profile.startWeight) - parseFloat(profile.currentWeight)).toFixed(1) : '0.0',
                    totalWater, totalEduValue, eduList, firstPhoto, latestPhoto
                };
            }, [daysData, profile]);

            const progressPct = Math.round((totalsData.completedDays / 75) * 100);
            const weightTrendData = useMemo(() => {
                return Object.entries(daysData).map(([id, d]) => ({ day: d.day, weight: parseFloat(d.weight) })).filter(d => !isNaN(d.weight)).sort((a, b) => a.day - b.day);
            }, [daysData]);

            // --- COMPUTED VIEW DATA ---
            const currentDayKey = `day-${currentDayIndex + 1}`;
            const dayRaw = daysData[currentDayKey] || {};
            const currentDayData = {
                tasks: dayRaw.tasks || {},
                waterOz: dayRaw.waterOz || 0,
                workout1_hrs: dayRaw.workout1_hrs || '',
                workout1_mins: dayRaw.workout1_mins || '',
                workout1_desc: dayRaw.workout1_desc || '',
                workout2_hrs: dayRaw.workout2_hrs || '',
                workout2_mins: dayRaw.workout2_mins || '',
                workout2_desc: dayRaw.workout2_desc || '',
                consumptionTitle: dayRaw.consumptionTitle || '',
                photoData: dayRaw.photoData || null,
                weight: dayRaw.weight || ''
            };

            // --- ACTION HANDLERS ---
            const updateProfileOnCloud = async (updates) => {
                if (activeProfileId) {
                    await db.collection('artifacts').doc(appId).collection('public').doc('data').collection('profiles').doc(activeProfileId).set(updates, { merge: true });
                }
            };

            const commitProfileChanges = async () => {
                const target = draftProfile || profile;
                if (!target.dietDescription.trim() || !target.intentions.trim()) {
                    setAuthStatus({ message: "Diet Goal and Intentions are required.", type: "error" });
                    return;
                }
                const savePayload = { ...target, isConfigured: true };
                setProfile(savePayload);
                await updateProfileOnCloud(savePayload);
                setAppPhase('dashboard');
                setActiveTab('today');
                setAuthStatus({ message: '', type: '' });
            };

            const handleProfileAuth = async () => {
                const uInput = usernameInput.trim().toLowerCase();
                const pInput = passwordInput.trim();
                if (!uInput || !pInput) return setAuthStatus({ message: "Username and Password required.", type: "error" });
                try {
                    const profileRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('profiles').doc(uInput);
                    const docSnap = await profileRef.get();
                    if (docSnap.exists) {
                        if (docSnap.data().passcode === pInput) {
                            await db.collection('artifacts').doc(appId).collection('users').doc(user.uid).collection('profile').doc('session_link').set({ activeProfileId: uInput });
                            setActiveProfileId(uInput);
                        } else {
                            setAuthStatus({ message: "Incorrect password.", type: "error" });
                        }
                    } else {
                        const newP = { ...profile, passcode: pInput, isConfigured: false, startDate: new Date().toISOString().split('T')[0] };
                        await profileRef.set(newP);
                        await db.collection('artifacts').doc(appId).collection('users').doc(user.uid).collection('profile').doc('session_link').set({ activeProfileId: uInput });
                        setAppPhase('setup');
                        setDraftProfile(newP);
                        setActiveProfileId(uInput);
                    }
                } catch (e) { setAuthStatus({ message: "Connection failed.", type: "error" }); }
            };

            const applyProgramPresetToDraft = (type) => {
                let updates = { programType: type };
                if (type === 'hard_classic') {
                    updates = { ...updates, workoutCount: 2, workoutMins: 45, outdoorRequired: true, targetWaterOz: 128, consumptionType: 'reading', consumptionGoal: 10, dietRequired: true, photoRequired: true, alcoholRequired: true, alcoholLimit: 0 };
                } else if (type === 'medium') {
                    updates = { ...updates, workoutCount: 1, workoutMins: 45, outdoorRequired: false, targetWaterOz: 128, consumptionType: 'reading', consumptionGoal: 10, dietRequired: true, photoRequired: true, alcoholRequired: true, alcoholLimit: 0 };
                } else if (type === 'soft') {
                    updates = { ...updates, workoutCount: 1, workoutMins: 30, outdoorRequired: false, targetWaterOz: 64, consumptionType: 'reading', consumptionGoal: 5, dietRequired: true, photoRequired: false, alcoholRequired: false, alcoholLimit: 7 };
                }
                setDraftProfile(prev => ({ ...prev, ...updates }));
            };

            const updateProfileOnTheFly = async (updates) => {
                setProfile(prev => ({ ...prev, ...updates }));
                await updateProfileOnCloud(updates);
            };

            const updateDayData = async (dayIdx, updates) => {
                const dayId = `day-${dayIdx + 1}`;
                const existing = daysData[dayId] || {};
                await db.collection('artifacts').doc(appId).collection('public').doc('data').collection('days').doc(`${activeProfileId}_${dayId}`).set({
                    ...existing, ...updates, owner: activeProfileId, day: dayIdx + 1
                }, { merge: true });
            };

            const handleFullReset = async () => {
                const confirmPhrase = prompt("Type 'RESTART' to wipe all progress. This cannot be undone.");
                if (confirmPhrase === 'RESTART') {
                    setLoading(true);
                    const resetProfile = { ...profile, isConfigured: false };
                    setProfile(resetProfile);
                    setDraftProfile(resetProfile);
                    await updateProfileOnCloud(resetProfile);
                    const daysCol = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('days');
                    const snapshot = await daysCol.get();
                    const batch = db.batch();
                    snapshot.forEach(doc => { if (doc.data().owner === activeProfileId) batch.delete(doc.ref); });
                    await batch.commit();
                    setAppPhase('setup');
                    setShowResetConfirm(false);
                    setLoading(false);
                }
            };

            const handleSignOut = async () => {
                if (confirm("Logout?")) {
                    await db.collection('artifacts').doc(appId).collection('users').doc(user.uid).collection('profile').doc('session_link').set({ activeProfileId: null });
                    setActiveProfileId(null);
                    setAppPhase('auth');
                    window.location.reload();
                }
            };

            const handlePhotoUpload = async (e) => {
                const file = e.target.files?.[0];
                if (!file || !activeProfileId) return;
                setIsUploading(true);
                const reader = new FileReader();
                reader.onloadend = async () => {
                    const base64String = reader.result;
                    await updateDayData(currentDayIndex, { photoData: base64String, tasks: { ...currentDayData.tasks, photo: true } });
                    setIsUploading(false);
                };
                reader.readAsDataURL(file);
            };

            // --- EFFECTS ---
            useEffect(() => {
                const unsubscribe = auth.onAuthStateChanged(async (u) => {
                    if (!u) { try { await auth.signInAnonymously(); } catch(e) { setDbError("Auth failed."); } } 
                    else {
                        setUser(u);
                        try {
                            const linkRef = db.collection('artifacts').doc(appId).collection('users').doc(u.uid).collection('profile').doc('session_link');
                            const linkSnap = await linkRef.get();
                            if (linkSnap.exists && linkSnap.data().activeProfileId) { setActiveProfileId(linkSnap.data().activeProfileId); } 
                            else { setAppPhase('auth'); setLoading(false); }
                        } catch (e) { setDbError("Rules blocked cloud connection."); setLoading(false); }
                    }
                });
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                if (!user || !activeProfileId) return;
                const profileRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('profiles').doc(activeProfileId);
                const unsub = profileRef.onSnapshot((docSnap) => {
                    if (docSnap.exists) {
                        const data = docSnap.data();
                        setProfile(data);
                        if (!draftProfile) setDraftProfile(data);
                        setAppPhase(data.isConfigured ? 'dashboard' : 'setup');
                    } else { setAppPhase('setup'); }
                    setLoading(false);
                });
                return () => unsub();
            }, [user, activeProfileId]);

            // --- RENDER HELPERS ---
            const renderSetupUI = (isTab = false) => {
                const target = draftProfile || profile;
                const isHardPreset = target.programType === 'hard_classic';

                return (
                    <div className={isTab ? "space-y-6" : "min-h-screen bg-slate-950 flex flex-col items-center justify-center p-6 text-center"}>
                        <div className={isTab ? "bg-slate-900 border border-slate-800 p-8 rounded-[2.5rem] shadow-2xl space-y-6" : "max-w-lg w-full bg-slate-900 border border-slate-800 p-8 rounded-[2.5rem] shadow-2xl space-y-6 max-h-[90vh] overflow-y-auto scrollbar-hide"}>
                            {!isTab && <Icon name="target" className="w-12 h-12 text-indigo-400 mx-auto" />}
                            <h2 className="text-2xl font-black uppercase text-white">Program Configuration</h2>
                            <div className="space-y-6 text-left">
                                <div className="p-4 bg-slate-800/20 rounded-2xl border border-slate-800">
                                    <label className="text-[10px] font-black uppercase text-slate-500 block mb-1">Mastery Mode</label>
                                    <select className="w-full bg-transparent p-2 text-white font-bold outline-none" value={target.programType} onChange={(e) => applyProgramPresetToDraft(e.target.value)}>
                                        <option value="hard_classic">75 Hard (Classic Rules)</option>
                                        <option value="medium">75 Medium</option>
                                        <option value="soft">75 Soft</option>
                                        <option value="custom">Fully Custom</option>
                                    </select>
                                </div>
                                <div className="p-4 bg-slate-800/10 rounded-2xl border border-slate-800/50 space-y-4">
                                    <h3 className="text-[10px] font-black text-orange-500 uppercase flex items-center gap-2"><Icon name="dumbbell" /> Workout Rules</h3>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div><label className="text-[10px] text-slate-500">Count</label><select disabled={isHardPreset} className="w-full bg-slate-800 p-2 rounded-xl text-white font-bold disabled:opacity-50" value={target.workoutCount} onChange={(e) => setDraftProfile({...target, workoutCount: parseInt(e.target.value)})}><option value={1}>1</option><option value={2}>2</option></select></div>
                                        <div><label className="text-[10px] text-slate-500">Mins</label><input type="number" disabled={isHardPreset} className="w-full bg-slate-800 p-2 rounded-xl text-white font-bold disabled:opacity-50" value={target.workoutMins} onChange={(e) => setDraftProfile({...target, workoutMins: parseInt(e.target.value)})} /></div>
                                    </div>
                                    <div className="flex items-center justify-between"><span className="text-xs text-slate-300">Outdoor Required</span><button disabled={isHardPreset} onClick={() => setDraftProfile({...target, outdoorRequired: !target.outdoorRequired})} className={`w-10 h-5 rounded-full relative ${target.outdoorRequired ? 'bg-orange-500' : 'bg-slate-700'}`}><div className={`absolute top-1 w-3 h-3 bg-white rounded-full transition-all ${target.outdoorRequired ? 'right-1' : 'left-1'}`} /></button></div>
                                </div>
                                <div className="p-4 bg-slate-800/10 rounded-2xl border border-slate-800/50 space-y-4">
                                    <h3 className="text-[10px] font-black text-purple-500 uppercase flex items-center gap-2"><Icon name="book-open" /> Education Mode</h3>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div><label className="text-[10px] text-slate-500">Type</label><select disabled={isHardPreset} className="w-full bg-slate-800 p-2 rounded-xl text-white font-bold disabled:opacity-50" value={target.consumptionType} onChange={(e) => setDraftProfile({...target, consumptionType: e.target.value})}><option value="reading">Book</option><option value="podcast">Podcast</option></select></div>
                                        <div><label className="text-[10px] text-slate-500">Goal ({target.consumptionType === 'reading' ? 'Pages' : 'Mins'})</label><input type="number" disabled={isHardPreset} className="w-full bg-slate-800 p-2 rounded-xl text-white font-bold disabled:opacity-50" value={target.consumptionGoal} onChange={(e) => setDraftProfile({...target, consumptionGoal: parseInt(e.target.value)})} /></div>
                                    </div>
                                </div>
                                <div className="p-4 bg-slate-800/10 rounded-2xl border border-slate-800/50 space-y-4">
                                    <h3 className="text-[10px] font-black text-amber-500 uppercase flex items-center gap-2 font-bold"><Icon name="beer" /> Alcohol Controls</h3>
                                    <div className="flex items-center justify-between">
                                        <span className="text-xs text-slate-300">Strict Zero Alcohol</span>
                                        <button disabled={isHardPreset} onClick={() => setDraftProfile({...target, alcoholRequired: !target.alcoholRequired})} className={`w-10 h-5 rounded-full relative ${target.alcoholRequired ? 'bg-amber-500' : 'bg-slate-700'}`}><div className={`absolute top-1 w-3 h-3 bg-white rounded-full transition-all ${target.alcoholRequired ? 'right-1' : 'left-1'}`} /></button></div>
                                    {!target.alcoholRequired && ( <input type="number" className="w-full bg-slate-800 p-3 rounded-xl text-white font-bold" placeholder="Drinks limit..." value={target.alcoholLimit} onChange={(e) => setDraftProfile({...target, alcoholLimit: parseInt(e.target.value)})} /> )}
                                </div>
                                <div className="p-4 bg-slate-800/10 rounded-2xl border border-slate-800/50 space-y-4">
                                    <h3 className="text-[10px] font-black text-pink-500 uppercase flex items-center gap-2 font-bold"><Icon name="camera" /> Progress Pic</h3>
                                    <div className="flex items-center justify-between">
                                        <span className="text-xs text-slate-300">Require Daily Photo</span>
                                        <button disabled={isHardPreset} onClick={() => setDraftProfile({...target, photoRequired: !target.photoRequired})} className={`w-10 h-5 rounded-full relative ${target.photoRequired ? 'bg-pink-500' : 'bg-slate-700'}`}><div className={`absolute top-1 w-3 h-3 bg-white rounded-full transition-all ${target.photoRequired ? 'right-1' : 'left-1'}`} /></button>
                                    </div>
                                </div>
                                <div className="p-4 bg-slate-800/10 rounded-2xl border border-slate-800/50 space-y-4">
                                    <div><label className="text-[10px] text-slate-500 uppercase block mb-1">Start Date</label><input type="date" className="w-full bg-slate-800 p-3 rounded-xl text-white font-bold" value={target.startDate} onChange={(e) => setDraftProfile({...target, startDate: e.target.value})} /></div>
                                    <div><label className="text-[10px] text-slate-500 uppercase block mb-1">Diet Goal</label><input type="text" className="w-full bg-slate-800 p-3 rounded-xl text-white font-bold" value={target.dietDescription} onChange={(e) => setDraftProfile({...target, dietDescription: e.target.value})} /></div>
                                    <div><label className="text-[10px] text-slate-500 uppercase block mb-1">The Big "Why"</label><textarea className="w-full bg-slate-800 p-3 rounded-xl text-white font-bold h-20" value={target.intentions} onChange={(e) => setDraftProfile({...target, intentions: e.target.value})} /></div>
                                </div>
                                <button onClick={commitProfileChanges} className="w-full bg-green-600 p-5 rounded-2xl text-white font-black uppercase text-sm shadow-xl">
                                    {isTab ? "Save Changes & Return" : "Launch Journey"}
                                </button>
                                {isTab && (
                                    <div className="pt-6 border-t border-slate-800">
                                        {showResetConfirm ? (
                                            <div className="bg-rose-500/10 border border-rose-500/30 p-4 rounded-3xl space-y-4">
                                                <p className="text-xs text-rose-500 uppercase font-black">Reset Warning</p>
                                                <div className="flex gap-2">
                                                    <button onClick={handleFullReset} className="flex-1 bg-rose-500 p-4 rounded-xl text-xs text-white font-black uppercase">Confirm Wipe</button>
                                                    <button onClick={() => setShowResetConfirm(false)} className="px-6 bg-slate-800 p-4 rounded-xl text-xs text-slate-400 font-black uppercase">Cancel</button>
                                                </div>
                                            </div>
                                        ) : ( <button onClick={() => setShowResetConfirm(true)} className="w-full p-4 rounded-2xl text-rose-500 font-black uppercase text-[10px] border border-rose-500/30">Reset Entire Journey</button> )}
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            };

            // Main UI check
            if (loading) return (
                <div className="flex flex-col items-center justify-center h-screen bg-slate-950 text-orange-500 uppercase font-black tracking-widest gap-4">
                    <div className="w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"></div>
                    Establishing Hub...
                </div>
            );

            if (appPhase === 'auth') {
                return (
                    <div className="min-h-screen bg-slate-950 flex items-center justify-center p-6">
                        <div className="max-w-md w-full space-y-8 animate-in fade-in duration-500">
                            <div className="text-center space-y-2">
                                <div className="inline-block p-4 bg-orange-500 rounded-3xl text-white shadow-2xl mb-4 animate-bounce"><Icon name="trophy" className="w-10 h-10" /></div>
                                <h1 className="text-4xl font-black uppercase text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-rose-600 tracking-tighter leading-none">75 Mastery</h1>
                            </div>
                            <div className="bg-slate-900 p-8 rounded-[2.5rem] border border-slate-800 shadow-2xl space-y-6 text-center font-bold">
                                <div className="space-y-4">
                                    <div className="relative text-left">
                                        <label className="text-[10px] font-black text-slate-500 uppercase ml-2 mb-1 block tracking-widest">Username</label>
                                        <Icon name="user" className="absolute left-4 top-[34px] w-5 h-5 text-slate-600" />
                                        <input type="text" className="w-full bg-slate-950 border border-slate-800 rounded-2xl p-4 pl-12 text-white outline-none focus:border-indigo-500" placeholder="Username" value={usernameInput} onChange={(e) => setUsernameInput(e.target.value)} />
                                    </div>
                                    <div className="relative text-left">
                                        <label className="text-[10px] font-black text-slate-500 uppercase ml-2 mb-1 block tracking-widest">Password</label>
                                        <Icon name="lock" className="absolute left-4 top-[34px] w-5 h-5 text-slate-600" />
                                        <input type="password" class="w-full bg-slate-950 border border-slate-800 rounded-2xl p-4 pl-12 text-white outline-none focus:border-indigo-500" placeholder="Password" value={passwordInput} onChange={(e) => setPasswordInput(e.target.value)} />
                                    </div>
                                </div>
                                {authStatus.message && <div className={`p-3 rounded-xl text-[10px] font-black uppercase text-center ${authStatus.type === 'error' ? 'bg-rose-500/10 text-rose-500' : 'bg-green-500/10 text-green-500'}`}>{authStatus.message}</div>}
                                <button onClick={handleProfileAuth} className="w-full bg-indigo-500 p-5 rounded-2xl text-white font-black uppercase tracking-widest shadow-xl active:scale-95 transition-all text-sm">Login or Create Account</button>
                            </div>
                        </div>
                    </div>
                );
            }

            if (appPhase === 'setup') return renderSetupUI(false);

            const isWaterDone = (currentDayData.waterOz || 0) >= (profile.targetWaterOz || 128);
            const w1MinsT = (parseInt(currentDayData.workout1_hrs) || 0) * 60 + (parseInt(currentDayData.workout1_mins) || 0);
            const w2MinsT = (parseInt(currentDayData.workout2_hrs) || 0) * 60 + (parseInt(currentDayData.workout2_mins) || 0);

            const pillars = [
                { id: 'workout1', label: profile.outdoorRequired ? 'Outdoor Workout' : 'Workout One', icon: <Icon name="dumbbell" />, sub: `${profile.workoutMins} Min Req`, qualifies: w1MinsT >= profile.workoutMins },
                ...(profile.workoutCount === 2 ? [{ id: 'workout2', label: 'Workout Two', icon: <Icon name="dumbbell" />, sub: `${profile.workoutMins} Min Req`, qualifies: w2MinsT >= profile.workoutMins }] : []),
                { id: 'consumption', label: profile.programType === 'hard_classic' ? 'Reading Log' : (profile.consumptionType === 'reading' ? 'Reading Log' : 'Podcast Log'), icon: profile.consumptionType === 'reading' ? <Icon name="book-open" /> : <Icon name="mic" />, sub: `Goal: ${profile.consumptionGoal} ${profile.consumptionType === 'reading' ? 'Pages' : 'Mins'}` },
                ...(profile.photoRequired ? [{ id: 'photo', label: profile.photoTitle || 'Visual Progress', icon: <Icon name="camera" />, sub: 'Daily Selfie' }] : []),
                { id: 'diet', label: 'Follow a Diet', icon: <Icon name="utensils" />, sub: profile.programType === 'hard_classic' ? `${profile.dietDescription || 'Standard'} â€¢ No Cheats` : (profile.dietDescription || 'No Cheats') },
                ...(profile.alcoholRequired || profile.alcoholLimit > 0 ? [{ id: 'alcohol', label: profile.alcoholRequired ? 'No Alcohol' : 'Alcohol within Limit', icon: <Icon name="beer" />, sub: profile.alcoholRequired ? 'Zero Tolerance' : `Max ${profile.alcoholLimit} drinks / day` }] : [])
            ];

            return (
                <div className="min-h-screen bg-slate-950 text-slate-100 font-sans pb-32 animate-in fade-in duration-500 font-bold">
                    <header className="p-6 bg-slate-900 border-b border-slate-800 sticky top-0 z-40 shadow-xl">
                        <div className="flex justify-between items-start mb-6">
                            <div><h1 className="text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-rose-600 uppercase">75 Mastery</h1><p className="text-[10px] text-slate-500 font-bold uppercase mt-2">Profil: {activeProfileId}</p></div>
                            <div className="text-right"><div className="text-xs font-black text-orange-400 uppercase">Day {currentDayIndex+1}</div></div>
                        </div>
                        <div className="relative h-3 bg-slate-800 rounded-full overflow-hidden mb-2"><div className="absolute h-full bg-gradient-to-r from-orange-500 to-rose-500 transition-all duration-1000" style={{ width: `${progressPct}%` }} /></div>
                        <div className="flex justify-between text-[10px] font-black text-slate-500 uppercase"><span>{progressPct}% Complete</span><span>{totalsData.completedDays} / 75 Days</span></div>
                    </header>

                    <nav className="flex px-4 py-2 gap-2 bg-slate-950 sticky top-[138px] z-30 shadow-2xl border-b border-slate-900 overflow-x-auto scrollbar-hide font-bold">
                        {['today', 'gallery', 'stats', 'tips', 'setup'].map(tab => (
                            <button key={tab} onClick={() => setActiveTab(tab)} className={`flex-1 min-w-[90px] py-3 rounded-xl text-[10px] font-black uppercase transition-all flex flex-col items-center gap-1 ${activeTab === tab ? 'bg-orange-500 text-white shadow-lg' : 'text-slate-400 hover:bg-slate-900'}`}>
                                <Icon name={tab === 'today' ? 'calendar' : tab === 'gallery' ? 'layout-grid' : tab === 'stats' ? 'activity' : tab === 'tips' ? 'lightbulb' : 'settings'} /> {tab}
                            </button>
                        ))}
                    </nav>

                    <main className="p-4 max-w-lg mx-auto space-y-6">
                        {activeTab === 'today' && (
                            <>
                                <div className="p-5 bg-orange-500/5 border border-orange-500/20 rounded-3xl text-center shadow-lg"><p className="text-[10px] font-black uppercase text-orange-500 mb-2">Remember Why You Started</p><p className="italic text-sm text-orange-200/70">"{profile.intentions}"</p></div>
                                <div className="bg-slate-900 p-4 rounded-2xl border border-slate-800 shadow-xl flex flex-col space-y-3 font-bold"><label className="text-[10px] font-black text-slate-500 uppercase">Jump to Day</label><div className="flex items-center justify-between gap-4"><select className="flex-1 bg-slate-800 border border-slate-700 rounded-xl p-3 text-white font-black" value={currentDayIndex} onChange={(e) => setCurrentDayIndex(parseInt(e.target.value))}>{Array.from({ length: 75 }).map((_, i) => (<option key={i} value={i}>Day {i + 1}</option>))}</select><p className="text-sm font-bold">{getDisplayDate(profile.startDate, currentDayIndex)}</p></div></div>
                                <div className={`p-5 rounded-3xl border transition-all ${isWaterDone ? 'bg-green-500/10 border-green-500/50 shadow-inner' : 'bg-slate-900 border-slate-800'}`}>
                                    <div className="flex justify-between items-center mb-4 font-bold"><div className="flex items-center gap-2 font-bold"><div className={`p-2 rounded-lg ${isWaterDone ? 'bg-green-500 text-white' : 'bg-cyan-500/20 text-cyan-400'}`}><Icon name={isWaterDone ? "check" : "droplets"} /></div><h3 className="font-black text-sm uppercase">Hydration</h3>{isWaterDone && <span className="bg-green-500 text-white text-[8px] font-black px-2 py-0.5 rounded-full font-bold">Goal Met</span>}</div><div className="text-right flex items-center gap-2 font-black"><input type="number" className="bg-slate-950 border border-slate-800 px-2 py-1 rounded w-16 text-center text-white" value={currentDayData.waterOz || 0} onChange={(e) => updateDayData(currentDayIndex, { waterOz: parseInt(e.target.value) || 0 })} /><span className="text-xs text-slate-500 font-black font-bold">Oz / {profile.targetWaterOz}</span></div></div>
                                    <div className="flex gap-2 overflow-x-auto pb-2 scrollbar-hide">{[8, 16, 24, 32].map(oz => (<button key={oz} onClick={() => updateDayData(currentDayIndex, { waterOz: (currentDayData.waterOz || 0) + oz })} className="bg-slate-800 border border-slate-700 px-4 py-2 rounded-xl text-xs font-bold text-slate-300">+{oz}oz</button>))}</div>
                                </div>
                                <div className="space-y-4">
                                    {pillars.map(p => {
                                        const done = currentDayData.tasks?.[p.id];
                                        if (p.id.startsWith('workout')) {
                                            const color = p.id === 'workout1' ? 'orange' : 'blue';
                                            return (
                                                <div key={p.id} className={`p-5 rounded-3xl border transition-all ${done ? `bg-${color}-500/10 border-${color}-500/50 shadow-inner` : 'bg-slate-900 border-slate-800 shadow-xl'}`}>
                                                    <div className="flex justify-between items-start mb-4"><div className="flex items-center gap-2"><div className={`p-2 rounded-lg ${done ? `bg-${color}-500 text-white` : `bg-${color}-500/20 text-${color}-500`}`}><Icon name="dumbbell" /></div><div><h3 className={`font-black text-sm uppercase ${done ? 'text-slate-100' : 'text-slate-300'}`}>{p.label}</h3><p className="text-[10px] text-slate-500 uppercase">{p.sub}</p></div></div><div className="flex gap-1"><input type="number" className="w-10 bg-slate-950 border border-slate-800 rounded px-1 text-center font-bold text-white" value={currentDayData[`${p.id}_hrs`] || ''} onChange={(e) => updateDayData(currentDayIndex, { [`${p.id}_hrs`]: e.target.value })} />:<input type="number" className="w-10 bg-slate-950 border border-slate-800 rounded px-1 text-center font-bold text-white" value={currentDayData[`${p.id}_mins`] || ''} onChange={(e) => updateDayData(currentDayIndex, { [`${p.id}_mins`]: e.target.value })} /></div></div>
                                                    <textarea className="w-full bg-slate-800/50 border border-slate-700 rounded-xl p-3 text-sm text-slate-300 h-20 mb-3" placeholder="Details..." value={currentDayData[`${p.id}_desc`] || ''} onChange={(e) => updateDayData(currentDayIndex, { [`${p.id}_desc`]: e.target.value })} />
                                                    <div className="flex gap-2 font-bold">
                                                        {done ? <div className="flex-1 py-3 bg-green-500/20 border border-green-700 rounded-xl text-xs text-green-400 uppercase text-center font-black">Completed</div> : <button disabled={!p.qualifies} onClick={() => updateDayData(currentDayIndex, { tasks: { ...currentDayData.tasks, [p.id]: true }})} className={`flex-1 py-3 border rounded-xl text-xs font-black uppercase ${!p.qualifies ? 'bg-slate-900 border-slate-800 text-slate-600' : 'bg-indigo-600 border-indigo-500 text-white'}`}>Complete Task</button>}
                                                        {done && <button onClick={() => updateDayData(currentDayIndex, { tasks: { ...currentDayData.tasks, [p.id]: false }})} className="p-3 bg-slate-800 border border-slate-700 rounded-xl font-bold"><Icon name="rotate-ccw" /></button>}
                                                    </div>
                                                </div>
                                            );
                                        }
                                        if (p.id === 'consumption') return (
                                            <div key={p.id} className={`p-5 rounded-3xl border transition-all ${done ? 'bg-purple-500/10 border-purple-500/50 shadow-inner' : 'bg-slate-900 border-slate-800 shadow-xl'}`}>
                                                <div className="flex items-center justify-between mb-4">
                                                    <div className="flex items-center gap-2"><div className={`p-2 rounded-lg ${done ? 'bg-purple-500 text-white' : 'bg-purple-500/20 text-purple-400'}`}><Icon name={profile.consumptionType === 'reading' ? "book-open" : "mic"} /></div><h3 className="font-black text-sm uppercase">{p.label}</h3></div>
                                                    {done ? <button onClick={() => updateDayData(currentDayIndex, { tasks: { ...currentDayData.tasks, consumption: false }})} className="p-2 bg-slate-800 border border-slate-700 rounded-xl font-bold"><Icon name="rotate-ccw" /></button> : <button onClick={() => updateDayData(currentDayIndex, { tasks: { ...currentDayData.tasks, consumption: true }})} className="px-4 py-2 bg-purple-500 border border-purple-400 rounded-xl font-black text-[10px] uppercase text-white shadow-lg active:scale-95 transition-all">Mark as Completed</button>}
                                                </div>
                                                <input type="text" className="w-full bg-slate-800/50 border border-slate-700 rounded-xl p-3 text-sm text-slate-300" placeholder="Title..." value={currentDayData.consumptionTitle || ''} onChange={(e) => updateDayData(currentDayIndex, { consumptionTitle: e.target.value })} />
                                            </div>
                                        );
                                        if (p.id === 'photo') return (
                                            <div key={p.id} className={`p-5 rounded-3xl border transition-all ${done ? 'bg-pink-500/10 border-pink-500/50 shadow-inner' : 'bg-slate-900 border-slate-800 shadow-xl'}`}>
                                                <div className="flex items-center justify-between mb-4">
                                                    <div className="flex items-center gap-2"><div className={`p-2 rounded-lg ${done ? 'bg-pink-500 text-white' : 'bg-pink-500/20 text-pink-500'}`}><Icon name="camera" /></div><h3 className="font-black text-sm uppercase">{p.label}</h3></div>
                                                    {currentDayData.photoData && <button onClick={removePhoto} className="p-2 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500/20 transition-all font-bold"><Icon name="trash-2" /></button>}
                                                </div>
                                                <div onClick={() => !done && fileInputRef.current?.click()} className={`relative aspect-video rounded-2xl border-2 border-dashed transition-all flex flex-col items-center justify-center overflow-hidden cursor-pointer ${currentDayData.photoData ? 'border-pink-500/50' : 'border-slate-800 bg-slate-800/20 hover:border-pink-500/30'}`}>
                                                    {currentDayData.photoData ? <img src={currentDayData.photoData} alt="Progress" className="w-full h-full object-cover font-bold" /> : <div className="flex flex-col items-center text-slate-500 font-bold">{isUploading ? <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500 font-bold" /> : <><Icon name="upload" className="mb-2 font-bold" /><span className="text-xs font-black uppercase tracking-widest font-bold">Upload Image</span></>}</div>}
                                                    <input type="file" ref={fileInputRef} onChange={handlePhotoUpload} accept="image/*" className="hidden font-bold" />
                                                </div>
                                                {!done && <button onClick={() => updateDayData(currentDayIndex, { tasks: { ...currentDayData.tasks, photo: true }})} className="w-full mt-3 py-2 bg-slate-800 text-[10px] text-slate-400 uppercase font-black rounded-lg">Skip & Complete</button>}
                                            </div>
                                        );
                                        const color = p.id === 'diet' ? 'green' : 'amber';
                                        return (
                                            <div key={p.id} className={`flex items-center p-5 rounded-3xl border transition-all ${done ? `bg-${color}-500/10 border-${color}-500/50 shadow-inner` : 'bg-slate-900 border-slate-800 shadow-xl'}`}>
                                                <div className={`p-2 rounded-lg mr-4 font-bold ${done ? `bg-${color}-500 text-white shadow-md` : `bg-${color}-500/20 text-${color}-500`}`}><Icon name={done ? "check" : p.id === 'diet' ? "utensils" : "beer"} /></div>
                                                <div className="flex-1 text-left font-bold"><span className={`block font-black text-sm uppercase tracking-wider ${done ? 'text-green-400' : 'text-white'}`}>{p.label} {done && "Completed"}</span><span className="text-[10px] text-slate-500 uppercase font-bold">{p.sub}</span></div>
                                                {done ? <button onClick={() => updateDayData(currentDayIndex, { tasks: { ...currentDayData.tasks, [p.id]: false }})} className="p-2 bg-slate-800 border border-slate-700 rounded-xl font-bold"><Icon name="rotate-ccw" /></button> : <button onClick={() => updateDayData(currentDayIndex, { tasks: { ...currentDayData.tasks, [p.id]: true }})} className={`px-4 py-2 bg-slate-800 border border-slate-700 rounded-xl text-[10px] font-black uppercase text-slate-400 hover:bg-green-500 hover:text-white transition-all`}>Complete</button>}
                                            </div>
                                        );
                                    })}
                                </div>
                            </>
                        )}
                        {activeTab === 'gallery' && (
                            <div className="bg-slate-900 p-6 rounded-3xl border border-slate-800 shadow-2xl font-bold">
                                <h3 className="text-lg font-black flex items-center gap-2 text-white mb-6 font-bold"><Icon name="image" className="text-pink-500" /> Evolution Gallery</h3>
                                <div className="grid grid-cols-3 sm:grid-cols-4 gap-3 font-bold">
                                    {Array.from({ length: 75 }).map((_, i) => {
                                        const info = daysData[`day-${i + 1}`];
                                        const comp = checkDayComplete(info, profile);
                                        return <button key={i} onClick={() => { setCurrentDayIndex(i); setActiveTab('today'); }} className={`aspect-square relative rounded-xl border flex flex-col items-center justify-center font-bold ${i === currentDayIndex ? 'border-orange-500 ring-2' : 'border-slate-800 bg-slate-800/30 font-bold'}`}>{info?.photoData ? <img src={info.photoData} className="w-full h-full object-cover font-bold" /> : <div className="text-[8px] font-black uppercase">D {i+1}</div>}{comp && <div className="absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full font-bold" />}</button>;
                                    })}
                                </div>
                            </div>
                        )}
                        {activeTab === 'stats' && (
                            <div className="space-y-6 font-bold font-bold">
                                <div className="bg-slate-900 p-6 rounded-3xl border border-slate-800 shadow-xl overflow-hidden relative text-center font-bold">
                                    <h3 className="text-lg font-black mb-2 flex items-center justify-center gap-2 text-white font-bold"><Icon name="activity" className="text-orange-500" /> Progress Trend</h3>
                                    <WeightChart data={weightTrendData} />
                                    <div className="grid grid-cols-2 gap-4 mt-6 font-black text-[9px] uppercase font-bold">
                                        <div className="bg-slate-800/50 p-4 rounded-2xl border border-slate-700/50">Weight Change<br/><span className="text-2xl text-green-400 font-bold">-{totalsData.weightLost} LBS</span></div>
                                        <div className="bg-slate-800/50 p-4 rounded-2xl border border-slate-700/50">Total Days<br/><span className="text-2xl text-cyan-400 font-bold font-bold">{totalsData.completedDays}</span></div>
                                    </div>
                                </div>
                                <div className="bg-slate-900 p-6 rounded-3xl border border-slate-800 shadow-xl font-bold font-bold">
                                    <h3 className="text-lg font-black mb-6 text-white font-bold"><Icon name="award" className="text-yellow-500 font-bold" /> Transformation</h3>
                                    {totalsData.firstPhoto && totalsData.latestPhoto ? (
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="text-center font-bold"><p className="text-[9px] uppercase mb-1">Day 1</p><img src={totalsData.firstPhoto} className="aspect-[3/4] object-cover rounded-xl border border-slate-800" /></div>
                                            <div className="text-center font-bold"><p className="text-[9px] uppercase mb-1">Latest</p><img src={totalsData.latestPhoto} className="aspect-[3/4] object-cover rounded-xl border border-green-500/30 font-bold" /></div>
                                        </div>
                                    ) : <p className="text-xs italic text-slate-600 text-center font-bold">Upload photos to track transformation.</p>}
                                </div>
                                <div className="bg-slate-900 p-6 rounded-3xl border border-slate-800 shadow-xl font-bold font-bold">
                                    <h3 className="text-lg font-black mb-6 text-white flex items-center gap-2 font-bold font-bold font-bold font-bold font-bold"><Icon name="zap" className="text-cyan-400" /> Lifetime Volume</h3>
                                    <div className="space-y-3 font-bold font-bold font-bold">
                                        <div className="flex justify-between text-xs font-black uppercase font-bold font-bold"><span>Hydration</span><span>{totalsData.totalWater} OZ</span></div>
                                        <div className="flex justify-between text-xs font-black uppercase font-bold font-bold"><span>Training</span><span>{totalsData.hours}H {totalsData.mins}M</span></div>
                                        <div className="flex justify-between text-xs font-black uppercase font-bold font-bold"><span>Education</span><span>{totalsData.totalEduValue} {profile.consumptionType === 'reading' ? 'Pages' : 'Mins'}</span></div>
                                    </div>
                                </div>
                                <div className="bg-slate-900 p-6 rounded-3xl border border-slate-800 shadow-xl font-bold font-bold">
                                    <h3 className="text-lg font-black mb-6 text-orange-500 font-bold font-bold"><Icon name="ruler" /> Measurements</h3>
                                    <div className="grid grid-cols-2 gap-4 mb-6 font-bold font-bold"><input type="number" step="0.1" className="bg-slate-950 p-3 rounded-xl border border-slate-800 font-bold" placeholder="Start Weight" value={profile.startWeight} onChange={(e) => updateProfileOnTheFly({ startWeight: e.target.value })} /><input type="number" disabled className="bg-slate-900 p-3 rounded-xl border border-slate-800 opacity-50 font-bold" value={profile.currentWeight} /></div>
                                    <div className="grid grid-cols-3 gap-2 uppercase text-[9px] font-bold">
                                        {['neck', 'chest', 'waist', 'arms', 'thighs', 'calves'].map(k => (<div key={k}>{k}<input type="number" className="w-full bg-slate-950 p-2 mt-1 rounded border border-slate-800" value={profile.measurements?.[k] || ''} onChange={(e) => updateProfileOnTheFly({ measurements: { ...profile.measurements, [k]: e.target.value }})} /></div>))}
                                    </div>
                                </div>
                            </div>
                        )}
                        {activeTab === 'tips' && (
                            <div className="space-y-6 font-bold font-bold">
                                <div className="bg-slate-900 p-6 rounded-3xl border border-slate-800 shadow-xl font-bold font-bold">
                                    <h3 className="text-xl font-black mb-6 text-orange-500 uppercase flex items-center gap-2 font-bold font-bold"><Icon name="shield" /> Mastery Wisdom</h3>
                                    <div className="space-y-4 text-sm text-slate-300 leading-relaxed font-bold font-bold">
                                        <p><strong className="text-white block font-bold font-bold">TIMING</strong> Take your photo and weigh yourself at the same time every morning.</p>
                                        <p><strong className="text-white block font-bold font-bold">HYDRATION</strong> 32oz when you wake up, 32oz after workout #1, 32oz after workout #2, 32oz with dinner.</p>
                                        <p><strong className="text-white block font-bold font-bold">READING</strong> Don't save it for bedtime. You'll fall asleep. Read when your mind is sharp.</p>
                                        <p className="p-4 bg-rose-500/10 border border-rose-500/20 rounded-xl font-black italic text-center font-bold font-bold">"If you have to ask if it counts, it likely doesn't. This is a mental program. Suck it up."</p>
                                        <a href="https://www.facebook.com/groups/75hard" target="_blank" className="flex items-center justify-between p-4 bg-indigo-600 rounded-xl text-white font-black uppercase text-xs font-bold font-bold">Join Facebook Group <Icon name="external-link" /></a>
                                    </div>
                                </div>
                            </div>
                        )}
                        {activeTab === 'setup' && renderSetupUI(true)}
                    </main>

                    {appPhase === 'dashboard' && (
                        <footer className="fixed bottom-0 left-0 right-0 bg-slate-900/95 backdrop-blur-xl border-t border-slate-800 px-6 py-4 z-50 font-bold font-bold">
                            <div className="max-w-lg mx-auto text-center space-y-1 font-bold font-bold font-bold">
                                <p className="text-[10px] font-black uppercase text-orange-500 tracking-widest font-bold">Remember Why You Started</p>
                                <p className="italic text-xs text-slate-300 line-clamp-2 px-4 font-bold font-bold">"{profile.intentions || "Commit to your journey."}"</p>
                            </div>
                        </footer>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
